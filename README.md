# Aaalice的ComfyUI工作流

## **📢 [加入Discord服务器获取更新日志和安装教程视频](https://discord.gg/R48n6GwXzD)**

---

## 简介

一个集成了图像生成、放大、细节优化等功能的ComfyUI工作流。采用模块化设计，可根据需求灵活配置各项功能。

⚠️ **首次使用请先查看工作流最左侧的注释说明**

---

## 功能列表

### 🎨 图像生成
- **文生图模式**：通过文本提示词生成图像
- **图生图模式**：基于输入图像进行再创作
- **参数调节**：支持调整CFG、采样器、调度器、步数等参数

### 🔍 图像放大
- **通用放大**：基础放大功能，可设置放大倍数和降噪强度（默认1.5倍）
- **迭代放大**：通过多次迭代提升放大质量（默认1.5倍，需要ComfyUI Noise插件）
- **分块放大**：将图像分块处理后放大，进一步细化和清晰化（默认1.5倍）
- **潜空间放大**：在潜空间进行放大处理（默认1.2倍，效果不稳定）
- **平铺控制网**：可选功能，配合通用放大处理超大尺寸图像

### ✨ 部位细化
- **脸部细化**：针对人脸区域的细节优化
- **眼部细化**：使用YOLO模型检测并优化眼部细节
- **手部细化**：检测并改善手部绘制质量
- **脚部细化**：优化脚部区域的细节表现
- 各部位可独立开启或关闭

### 🎯 局部重绘
- **通用局部重绘**：对图像局部区域进行重新绘制
- **Krita互联重绘**：支持与Krita软件联动进行重绘
- **背景移除**：自动去除图像背景

### 🔧 辅助功能
- **WD14图像反推**：从图像反向推导提示词
- **多人提示词编辑**：支持多个角色的提示词分别编辑
- **角色特征替换**：替换角色的特定特征
- **画廊功能**：批量生成图像的管理和查看
- **ControlNet底图控制**：使用ControlNet对底图进行精确控制
- **预处理器**：多种图像预处理选项
- **LoRA管理器**：便捷的LoRA模型加载和管理

### ⚙️ 性能与优化
- **大图直出模式**：直接生成大尺寸图像
- **加速功能**：支持负面条件加速等多种加速选项
- **高CFG支持**：支持更高的CFG参数值
- **显存清理**：自动清理GPU显存占用
- **图像对比**：方便对比处理前后的图像效果

### 📋 其他特性
- **参数管理系统**：通过SetNode/GetNode集中管理所有参数
- **批次生成**：支持批量生成多张图像
- **提示词处理**：支持随机语法、前后缀附加等提示词处理功能
- **提醒功能**：可选的声音提醒和弹窗提醒

---

## 工作流特点

- **模块化设计**：各功能模块独立，可根据需求选择性启用
- **参数集中管理**：通过SetNode/GetNode系统统一管理参数，修改方便
- **分模块参数控制**：每个模块可独立配置采样参数（步数、CFG、采样器等）
- **灵活组合**：文生图、图生图、放大、细化等模块可自由组合使用
- **性能友好**：可根据显存大小灵活开关功能，避免显存不足

---

## 使用建议

### 新手入门
1. **首次使用**：务必先查看工作流最左侧的注释说明
2. **从简单开始**：建议先使用文生图基础功能，熟悉后再启用其他模块
3. **注意组管理**：工作流分为多个功能组，注意不要同时启用冲突的组

### 性能优化
- **显存不足**：可以选择性关闭部位细化、降低放大倍数
- **加速生成**：可启用加速功能，但可能影响图像质量
- **批量生成**：调整批次大小参数可同时生成多张图像

---

## 注意事项

⚠️ **关于功能组**
- 文生图组和可选独立功能组不能同时启用
- 某些功能需要特定插件支持（如迭代放大需要ComfyUI Noise插件）

⚠️ **关于模型文件**
- 部位细化功能需要下载对应的YOLO检测模型
- 放大功能需要下载放大模型文件

⚠️ **关于参数调整**
- 双击滑条旁边的数字可以直接输入数值
- 绿色标签如挡视野可在ComfyUI设置中关闭

---

## 常用操作

### 工作流分区跳转快捷键

| 按键 | 跳转目标 |
|------|----------|
| **1** | 底模与提示词编辑区 |
| **2** | 底图选择区 |
| **3** | 图像对比区 |
| **4** | 组管理区 |
| **5** | 参数控制区 |
| **6** | 可选文生图附加功能区 |
| **7** | 可选独立功能区 |
| **8** | 角色特征替换区 |
| **9** | 多人提示词编辑器 |

### 组管理
- 工作流包含多个功能组（文生图组、可选独立功能组等）
- 通过组管理区的开关控制功能组的启用/禁用
- **重要**：文生图组和可选独立功能组不能同时启用

### 图像对比
- 部分节点支持图像对比功能
- 鼠标悬停在节点上，左右滑动可查看对比效果

---

## 版本信息

**获取更新**：[加入Discord服务器](https://discord.gg/aaalice)获取最新版本和更新日志
